{
  "story": "カード抽選API (card-draw-api)",
  "description": "バックエンドとして、「3枚引き」リクエストを受けて、過去・現在・未来のポジションに異なるカードを配置して返す。各カードには正位置/逆位置もランダムに設定される。",
  "goal": "3枚引きのタロットカード抽選機能を提供するREST APIを実装する",
  "scope": {
    "includes": [
      "3枚引きのエンドポイント実装",
      "過去・現在・未来のポジション割り当て",
      "カードの重複なしランダム抽選",
      "正位置/逆位置のランダム設定",
      "APIレスポンス形式の定義"
    ],
    "excludes": [
      "フロントエンド実装",
      "カードマスターデータの作成",
      "解釈テキストの生成",
      "認証・認可機能",
      "永続化・データベース連携"
    ]
  },
  "acceptance_criteria": [
    {
      "criterion": "3枚引きエンドポイントが正常に動作する",
      "details": [
        "POST /api/tarot/draw などのエンドポイントが存在する",
        "リクエストを受け付けてレスポンスを返す"
      ]
    },
    {
      "criterion": "3枚のカードが重複なく抽選される",
      "details": [
        "同じカードが複数回選ばれない",
        "必ず3枚のカードが返される"
      ]
    },
    {
      "criterion": "各カードにポジションが割り当てられる",
      "details": [
        "1枚目: past（過去）",
        "2枚目: present（現在）",
        "3枚目: future（未来）"
      ]
    },
    {
      "criterion": "各カードに正位置/逆位置がランダムに設定される",
      "details": [
        "upright（正位置）またはreversed（逆位置）がランダムに決定される",
        "各カード独立してランダムに設定される"
      ]
    },
    {
      "criterion": "APIレスポンスが適切な形式で返される",
      "details": [
        "JSON形式で返される",
        "カード情報（id, name, position, orientation等）が含まれる",
        "HTTPステータスコードが適切（200 OK等）"
      ]
    }
  ],
  "assumptions": [
    "カードマスターデータは78枚分すべて用意されている",
    "TypeScript/Node.js環境で実装する",
    "REST API形式で提供する",
    "エラーハンドリングは基本的なもの（400, 500等）を実装する"
  ],
  "risks": [
    {
      "risk": "カードマスターデータの形式が未定義",
      "mitigation": "先にデータ形式を定義し、モックデータで開発を進める"
    },
    {
      "risk": "ランダム抽選のテストが不安定になる可能性",
      "mitigation": "シードを固定したテスト、モックを使用したテストを実装する"
    }
  ]
}
