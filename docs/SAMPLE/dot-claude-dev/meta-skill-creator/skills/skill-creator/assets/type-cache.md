# Cache スクリプトテンプレート指示

> **読み込み条件**: type === "cache" の場合
> **対応ランタイム**: Node.js, Python

---

## 目的

キャッシュ操作（Redis等）を行うスクリプトを生成する。

---

## AIへの実装指示

### 必須機能

1. **基本操作**
   - GET/SET/DELETE
   - TTL設定
   - キーパターン検索

2. **データ構造操作**
   - Hash操作
   - List操作
   - Set操作

3. **一括操作**
   - パイプライン処理
   - トランザクション

4. **管理機能**
   - キー一覧取得
   - キー削除（パターン指定）
   - TTL確認・更新

### 推奨依存関係

| ランタイム | 推奨パッケージ |
|------------|----------------|
| Node.js | ioredis |
| Python | redis |

### 環境変数

- `{{REDIS_URL}}`: Redis接続URL
- `{{DEFAULT_TTL}}`: デフォルトTTL（秒）

### 引数仕様

| 引数 | 必須 | 説明 |
|------|------|------|
| --action | ○ | get/set/delete/keys/flush |
| --key | △ | キー名（action依存） |
| --value | △ | 値（setアクション時） |
| --ttl | × | 有効期限（秒） |
| --pattern | × | キーパターン（keysアクション時） |

### 出力形式

- 取得値または操作結果をJSON形式で出力

---

## コード構造の指示

AIは以下の構造でコードを生成してください:

```
1. インポート
   - Redisクライアント
   - JSON操作

2. 設定
   - 接続設定
   - 終了コード定数

3. ユーティリティ関数
   - connect(): 接続確立
   - getValue(): 値取得
   - setValue(): 値設定
   - deleteKeys(): キー削除
   - listKeys(): キー一覧

4. メイン処理
   - 引数パース
   - 接続確立
   - アクション実行
   - 結果出力
   - 接続クローズ
```

---

## 品質基準

AIは以下の基準を満たすコードを生成してください:

- [ ] 接続エラーの適切な処理
- [ ] 大量キー操作時のバッチ処理
- [ ] JSON値の自動シリアライズ/デシリアライズ
- [ ] 接続プールの適切な管理
- [ ] タイムアウト設定
