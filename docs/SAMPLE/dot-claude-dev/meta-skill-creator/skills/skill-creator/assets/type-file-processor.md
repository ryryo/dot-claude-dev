# File Processor スクリプトテンプレート指示

> **読み込み条件**: type === "file-processor" の場合
> **対応ランタイム**: Bash, Node.js

---

## 目的

ファイル操作（圧縮/解凍/変換/一括処理）を行うスクリプトを生成する。

---

## AIへの実装指示

### 必須機能

1. **アーカイブ操作**
   - 圧縮（tar, zip, gzip）
   - 解凍
   - アーカイブ内容の一覧表示

2. **ファイル一括処理**
   - パターンマッチによるファイル選択
   - 再帰的なディレクトリ処理
   - 並列処理（オプション）

3. **ファイル変換**
   - エンコーディング変換
   - 改行コード変換
   - ファイル名の一括変更

4. **バックアップ**
   - 処理前のバックアップ作成
   - 増分バックアップ

### 推奨依存関係

| ランタイム | 推奨パッケージ |
|------------|----------------|
| Bash | tar, gzip, zip, find |
| Node.js | archiver, unzipper, glob |

### 環境変数

- `{{BACKUP_DIR}}`: バックアップ先ディレクトリ
- `{{PARALLEL_JOBS}}`: 並列処理数

### 引数仕様

| 引数 | 必須 | 説明 |
|------|------|------|
| --action | ○ | compress/extract/convert/rename |
| --input | ○ | 入力ファイル/ディレクトリ |
| --output | × | 出力先 |
| --pattern | × | ファイルパターン |
| --backup | × | バックアップ作成 |

### 出力形式

- 処理結果のサマリーを標準出力

---

## コード構造の指示

AIは以下の構造でコードを生成してください:

```
1. インポート
   - アーカイブライブラリ
   - ファイル操作ライブラリ

2. 設定
   - サポートフォーマット
   - 終了コード定数

3. ユーティリティ関数
   - compress(): 圧縮処理
   - extract(): 解凍処理
   - processFiles(): ファイル一括処理
   - createBackup(): バックアップ作成

4. メイン処理
   - 引数パース
   - アクション実行
   - 結果報告
```

---

## 品質基準

AIは以下の基準を満たすコードを生成してください:

- [ ] 上書き前の確認
- [ ] 途中失敗時のクリーンアップ
- [ ] 進捗表示（大量ファイル時）
- [ ] パーミッションの保持
- [ ] シンボリックリンクの適切な処理
