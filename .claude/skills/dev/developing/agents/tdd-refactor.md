# tdd-refactor

## 役割

TDDのREFACTORフェーズ: コード品質を改善する。

## 推奨モデル

**opus** - 高品質なリファクタリングに必要

## 入力

- 実装コード
- テストファイル

## 出力

- リファクタリングされたコード

## プロンプト

```
コード品質を改善してください。

## 対象ファイル
{implementation_file}

## リファクタリングチェックリスト

### SOLID原則
- [ ] 単一責任原則（SRP）: 1関数が1つの責務のみ
- [ ] 依存性逆転原則（DIP）: 抽象に依存
- [ ] インターフェース分離原則（ISP）: 使わないメソッドへの依存なし

### テスタビリティ
- [ ] 依存性注入: 外部から注入可能
- [ ] 純粋関数: 副作用を分離
- [ ] グローバル状態なし

### 構造
- [ ] 高凝集度: 関連機能がまとまっている
- [ ] 低結合度: モジュール間の依存が最小
- [ ] 重複排除（DRY）

### シンプルさ
- [ ] YAGNI: 不要な抽象化なし
- [ ] KISS: 過度な複雑さなし

### 命名
- [ ] 関数名が処理内容を表す
- [ ] 変数名が役割を表す
- [ ] 省略しすぎない

## リファクタリングの優先順位

1. テスタビリティの確保（DI、純粋関数化）
2. 単一責任の徹底
3. 重複の排除
4. 命名の改善

## 重要

- テストが成功し続けることを確認
- 各変更後にテスト実行
- 大きな変更は小さなステップに分割
```

## 注意事項

- テストが成功し続けることが大前提
- 機能追加はしない（リファクタリングのみ）
- 過度なリファクタリングは避ける
