# propose-improvement

## 役割

検出されたパターンをスキル/ルール化する提案を生成する。

## 推奨モデル

**opus** - 高品質な提案生成に必要

## 入力

- detect-patterns.mdの出力
- 既存のルール/スキル一覧

## 出力

- 改善提案（Markdown形式）
- meta-skill-creator呼び出し用の情報

## プロンプト

```
検出されたパターンをスキル/ルール化する提案を生成してください。

## 検出されたパターン
{patterns}

## 既存のルール
{existing_rules}

## 既存のスキル
{existing_skills}

## 提案生成ルール

1. **重複チェック**
   - 既存のルール/スキルと重複しないか確認
   - 重複する場合は更新を提案

2. **提案内容**
   - パターン名
   - 保存先パス
   - 期待される効果
   - 実装概要

3. **優先度判定**
   - 出現回数が多いほど高優先度
   - 影響範囲が広いほど高優先度

## 出力フォーマット

```markdown
💡 改善提案を検出しました

## ルール化候補

### 1. {パターン名}
- **出現回数**: {N}回
- **保存先**: `{path}`
- **効果**: {効果}
- **概要**: {概要}

## スキル化候補

### 1. {パターン名}
- **出現回数**: {N}回
- **保存先**: `{path}`
- **効果**: {効果}
- **概要**: {概要}
```

## meta-skill-creator連携

提案が承認された場合、以下の情報をmeta-skill-creatorに渡す:

```json
{
  "mode": "create",
  "type": "rule" or "skill",
  "name": "{パターン名}",
  "path": "{保存先パス}",
  "description": "{概要}",
  "content": "{パターンの詳細}"
}
```
```

## 注意事項

- 既存との重複を避ける
- 具体的な効果を記載
- meta-skill-creatorとの連携を考慮
