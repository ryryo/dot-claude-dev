# 自己改善パターン検出基準

## ルール化候補の基準

### 出現回数

| 回数 | 判定 | アクション |
|------|------|------------|
| 1回 | 記録のみ | DESIGN.mdに記載 |
| 2回 | 監視 | パターンとして認識 |
| 3回以上 | ルール化候補 | 提案を生成 |

### パターンタイプ

1. **コーディングパターン**
   - 特定のライブラリの使い方
   - エラーハンドリングの方法
   - 型定義のパターン

   ```typescript
   // 例: Zodバリデーションパターン
   const schema = z.object({
     email: z.string().email(),
     password: z.string().min(8)
   });
   ```

2. **命名規則**
   - ファイル名の付け方
   - 関数名の付け方
   - 変数名の付け方

   ```
   例: コンポーネントファイルは PascalCase
   LoginForm.tsx, UserProfile.tsx
   ```

3. **設計判断**
   - アーキテクチャの選択
   - ライブラリの選択
   - 構造の決め方

   ```
   例: フォームは React Hook Form + Zod
   ```

## スキル化候補の基準

### 出現回数

| 回数 | 判定 | アクション |
|------|------|------------|
| 1回 | 記録のみ | DESIGN.mdに記載 |
| 2回以上 | スキル化候補 | 提案を生成 |

### パターンタイプ

1. **実装フロー**
   - 複数ステップからなる実装手順
   - 繰り返し実行するワークフロー

   ```
   例: 認証フロー実装
   1. バリデーション関数作成
   2. フォームコンポーネント作成
   3. API呼び出し実装
   4. エラーハンドリング追加
   ```

2. **セットアップ手順**
   - 新しい機能の初期設定
   - ライブラリの導入手順

   ```
   例: 新規ページセットアップ
   1. ページコンポーネント作成
   2. ルーティング追加
   3. レイアウト適用
   4. 権限設定
   ```

## 提案の優先度

| 優先度 | 条件 | 理由 |
|--------|------|------|
| 高 | 出現回数5回以上 | 頻繁に使用される |
| 高 | 影響範囲が広い | 多くの機能に関係 |
| 中 | 出現回数3-4回 | 一定の頻度 |
| 低 | 出現回数2回 | まだ傾向が不明確 |

## 提案テンプレート

### ルール提案

```markdown
## ルール化候補: {パターン名}

**出現回数**: {N}回
**出現場所**:
- {ファイル/ストーリー1}
- {ファイル/ストーリー2}

**パターン内容**:
{具体的なコード例や説明}

**期待される効果**:
- コードの一貫性向上
- レビュー時間の削減
- 新規メンバーの学習コスト削減

**保存先**: `.claude/rules/{category}/{name}.md`
```

### スキル提案

```markdown
## スキル化候補: {パターン名}

**出現回数**: {N}回
**出現場所**:
- {ストーリー1}
- {ストーリー2}

**手順概要**:
1. {ステップ1}
2. {ステップ2}
3. {ステップ3}

**期待される効果**:
- 実装時間の短縮
- 手順の標準化
- 品質の安定化

**保存先**: `.claude/skills/{category}/{name}/SKILL.md`
```

## 除外条件

以下のパターンはルール/スキル化の対象外:

1. **プロジェクト固有すぎる**
   - 他のプロジェクトで使えない
   - 特定のビジネスロジックに依存

2. **一時的なパターン**
   - 実験的な実装
   - 将来変更予定

3. **既存と重複**
   - 既存のルール/スキルでカバー済み
   - 公式ドキュメントで十分
