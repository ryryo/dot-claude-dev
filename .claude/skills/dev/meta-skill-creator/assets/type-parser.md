# Parser スクリプトテンプレート指示

> **読み込み条件**: type === "parser" の場合
> **対応ランタイム**: Node.js, Python

---

## 目的

JSON/YAML/XML/CSV等のデータフォーマットを変換するスクリプトを生成する。

---

## AIへの実装指示

### 必須機能

1. **入力パース**
   - 複数フォーマットの検出・読み込み
   - エンコーディング処理
   - 大きなファイルのストリーム処理

2. **フォーマット変換**
   - JSON ↔ YAML ↔ XML ↔ CSV 相互変換
   - スキーマ保持
   - データ型の適切な変換

3. **バリデーション**
   - 入力データの整合性チェック
   - スキーマ検証（オプション）

4. **出力**
   - 指定フォーマットでの出力
   - 整形オプション（pretty print）

### 推奨依存関係

| ランタイム | 推奨パッケージ |
|------------|----------------|
| Node.js | yaml, xml2js, csv-parse, csv-stringify |
| Python | pyyaml, xmltodict, pandas |

### 環境変数

- `{{DEFAULT_ENCODING}}`: デフォルトエンコーディング

### 引数仕様

| 引数 | 必須 | 説明 |
|------|------|------|
| --input | ○ | 入力ファイルパスまたは stdin |
| --from | × | 入力フォーマット（自動検出） |
| --to | ○ | 出力フォーマット |
| --output | × | 出力ファイルパス |
| --pretty | × | 整形出力 |

### 出力形式

- 変換後のデータを指定フォーマットで出力

---

## コード構造の指示

AIは以下の構造でコードを生成してください:

```
1. インポート
   - 各フォーマットのパーサー
   - ファイル操作

2. 設定
   - サポートフォーマット定義
   - 終了コード定数

3. ユーティリティ関数
   - detectFormat(): フォーマット検出
   - parseInput(): 入力パース
   - convertFormat(): フォーマット変換
   - formatOutput(): 出力整形

4. メイン処理
   - 引数パース
   - 入力読み込み
   - 変換実行
   - 結果出力
```

---

## 品質基準

AIは以下の基準を満たすコードを生成してください:

- [ ] 不正な入力の適切なエラーメッセージ
- [ ] データ型の正確な保持
- [ ] 大きなファイルの効率的な処理
- [ ] エンコーディングの正しい処理
- [ ] 空データの適切な処理
