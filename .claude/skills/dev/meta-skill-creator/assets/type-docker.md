# Docker スクリプトテンプレート指示

> **読み込み条件**: type === "docker" の場合
> **対応ランタイム**: Bash

---

## 目的

Docker操作を行うスクリプトを生成する。

---

## AIへの実装指示

### 必須機能

1. **イメージ管理**
   - イメージビルド
   - イメージプッシュ/プル
   - イメージクリーンアップ

2. **コンテナ操作**
   - コンテナ起動/停止
   - ログ取得
   - ヘルスチェック

3. **Compose操作**
   - サービス起動/停止
   - スケーリング
   - ログ集約

4. **ネットワーク/ボリューム**
   - ネットワーク作成/削除
   - ボリューム管理

### 推奨依存関係

| ランタイム | 推奨パッケージ |
|------------|----------------|
| Bash | docker, docker-compose |

### 環境変数

- `{{DOCKER_REGISTRY}}`: レジストリURL
- `{{DOCKER_IMAGE}}`: イメージ名
- `{{DOCKER_TAG}}`: タグ名

### 引数仕様

| 引数 | 必須 | 説明 |
|------|------|------|
| --action | ○ | build/push/run/stop/logs |
| --image | △ | イメージ名（action依存） |
| --tag | × | タグ名 |
| --compose-file | × | Composeファイルパス |
| --service | × | サービス名 |

### 出力形式

- 操作結果のサマリーを出力

---

## コード構造の指示

AIは以下の構造でコードを生成してください:

```
1. シェバン・設定
   - set -euo pipefail
   - 変数定義

2. ユーティリティ関数
   - build_image(): イメージビルド
   - push_image(): イメージプッシュ
   - run_container(): コンテナ起動
   - stop_container(): コンテナ停止
   - cleanup(): クリーンアップ

3. メイン処理
   - 引数パース
   - アクション実行
   - 結果報告
```

---

## 品質基準

AIは以下の基準を満たすコードを生成してください:

- [ ] ビルドキャッシュの活用
- [ ] マルチステージビルド対応
- [ ] セキュリティスキャン統合
- [ ] リソース制限の設定
- [ ] ログローテーション考慮
