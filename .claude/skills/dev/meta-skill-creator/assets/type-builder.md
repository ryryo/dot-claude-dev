# Builder スクリプトテンプレート指示

> **読み込み条件**: type === "builder" の場合
> **対応ランタイム**: Node.js, Bash

---

## 目的

プロジェクトビルド処理を行うスクリプトを生成する。

---

## AIへの実装指示

### 必須機能

1. **ビルド実行**
   - ビルドコマンドの実行
   - 環境別ビルド（dev/prod）
   - インクリメンタルビルド

2. **依存関係管理**
   - ビルド前の依存関係チェック
   - 必要なパッケージのインストール

3. **出力管理**
   - ビルド成果物の配置
   - 不要ファイルのクリーンアップ
   - ソースマップ生成

4. **エラー処理**
   - ビルドエラーの検出
   - 詳細なエラーログ

### 推奨依存関係

| ランタイム | 推奨パッケージ |
|------------|----------------|
| Node.js | vite, esbuild, webpack, tsc |
| Bash | make, cmake |

### 環境変数

- `{{BUILD_MODE}}`: ビルドモード（dev/prod）
- `{{OUTPUT_DIR}}`: 出力ディレクトリ

### 引数仕様

| 引数 | 必須 | 説明 |
|------|------|------|
| --mode | × | ビルドモード |
| --output | × | 出力先ディレクトリ |
| --clean | × | ビルド前にクリーン |
| --watch | × | ウォッチモード |
| --sourcemap | × | ソースマップ生成 |

### 出力形式

- ビルド結果のサマリーを出力

---

## コード構造の指示

AIは以下の構造でコードを生成してください:

```
1. インポート
   - ビルドツール
   - ファイル操作

2. 設定
   - ビルド設定
   - 終了コード定数

3. ユーティリティ関数
   - loadConfig(): 設定読み込み
   - clean(): クリーンアップ
   - build(): ビルド実行
   - copyAssets(): アセットコピー

4. メイン処理
   - 引数パース
   - クリーン（オプション）
   - ビルド実行
   - 結果報告
```

---

## 品質基準

AIは以下の基準を満たすコードを生成してください:

- [ ] ビルドエラーの詳細な報告
- [ ] ビルド時間の計測
- [ ] キャッシュの活用
- [ ] 並列ビルド対応
- [ ] 環境変数の適切な注入
